<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORTEX | Trade History</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/history.css">
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/history-service.js"></script>
</head>
<body>
    <div class="scanline"></div>
    <div class="container">
        <div class="ticker">
            <div class="ticker-content" id="tickerContent">
                <span class="ticker-item">Loading live prices...</span>
            </div>
        </div>
        <header>
            <div class="logo"><img src="assets/logos/cortex-logo-dark.png" alt="CORTEX" class="logo-img"><span>v.0.1.0</span></div>
            <a class="nav-item" href="index.html">&#8592; Dashboard</a>
            <a class="nav-item" href="market.html">Market Data</a>
            <div class="nav-item active">History</div>
            <a class="nav-item" href="cerebral.html">Cerebral</a>
            <a class="nav-item" href="tokenomics.html">Tokenomics</a>
        </header>
        <div class="stats-grid">
            <div class="stat-cell"><div class="stat-label">Total P&amp;L (YTD)</div><div class="stat-value text-green" id="statTotalPnl">&mdash;</div></div>
            <div class="stat-cell"><div class="stat-label">Win Rate</div><div class="stat-value" id="statWinRate">&mdash;</div></div>
            <div class="stat-cell"><div class="stat-label">Best Day</div><div class="stat-value text-green" id="statBestDay">&mdash;</div></div>
            <div class="stat-cell"><div class="stat-label">Worst Day</div><div class="stat-value text-red" id="statWorstDay">&mdash;</div></div>
        </div>
        <div class="section-header">
            <span>P&amp;L Calendar</span>
            <div class="year-selector" id="yearSelector"></div>
        </div>
        <div class="calendar-section">
            <div class="calendar-container" id="calendarChart"></div>
        </div>
        <div class="cal-legend">
            <span>Loss</span>
            <div class="cal-legend-bar" id="calLegend"></div>
            <span>Profit</span>
        </div>

        <!-- Strategy P&L Breakdown -->
        <div class="section-header">
            <span>Strategy Performance Breakdown</span>
            <span class="text-dim">LP Rebalancing · Arbitrage · Perpetuals</span>
        </div>
        <div class="strat-grid" id="stratGrid"></div>
        <div class="strat-chart-section">
            <div id="strategyChart"></div>
        </div>

        <!-- Agent P&L Attribution -->
        <div class="section-header">
            <span>Agent P&L Attribution</span>
            <span class="text-dim">9 Agents · YTD</span>
        </div>
        <table class="attr-table" id="attrTable">
            <thead>
                <tr>
                    <th>Agent</th>
                    <th>Role</th>
                    <th>Trades</th>
                    <th>Win Rate</th>
                    <th>P&L</th>
                    <th class="attr-bar-cell">Attribution</th>
                </tr>
            </thead>
            <tbody id="attrBody"></tbody>
        </table>

        <!-- Trade Decision Log -->
        <div class="section-header">
            <span>Trade Decision Log</span>
            <div class="tier-badges">
                <span class="tier-badge hot">HOT 7d</span>
                <span class="tier-badge warm">WARM 90d</span>
                <span class="tier-badge cold">COLD ∞</span>
            </div>
        </div>
        <div class="trade-log" id="tradeLog"></div>

        <!-- Analyst Report History -->
        <div class="section-header">
            <span>Analyst Report Archive</span>
            <span class="text-dim">Technical · On-Chain · Sentiment · Macro</span>
        </div>
        <div class="report-list" id="reportList"></div>

        <!-- Debate Transcript Archive -->
        <div class="section-header">
            <span>Debate Transcript Archive</span>
            <span class="text-dim">Adversarial · 4-Round Process</span>
        </div>
        <div class="debate-list" id="debateList"></div>

        <footer>
            <div>CORTEX TRADE HISTORY</div>
            <div>SOLANA MAINNET</div>
            <div>&copy;2026 WIENER LABS</div>
        </footer>
    </div>
    <div class="cal-tooltip" id="calTooltip"></div>
    <script src="js/history-app.js"></script>
    <script src="js/ticker.js"></script>
    <script src="js/wallet.js"></script>
    <script src="js/toast.js"></script>
</body>
</html>
