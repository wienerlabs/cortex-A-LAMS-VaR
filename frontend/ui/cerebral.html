<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORTEX | Cerebral — Cognitive Architecture</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/cerebral.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
</head>
<body>
    <div class="scanline"></div>
    <div class="container">
        <div class="ticker">
            <div class="ticker-content" id="tickerContent">
                <span class="ticker-item">Loading live prices...</span>
            </div>
        </div>
        <header>
            <div class="logo"><img src="assets/logos/cortex-logo-dark.png" alt="CORTEX" class="logo-img"><span>v.0.1.0</span></div>
            <a class="nav-item" href="index.html">&#8592; Dashboard</a>
            <a class="nav-item" href="market.html">Market Data</a>
            <a class="nav-item" href="history.html">History</a>
            <div class="nav-item active">Cerebral</div>
            <a class="nav-item" href="tokenomics.html">Tokenomics</a>
        </header>

        <!-- 1. Decision Flow Pipeline — Sankey Diagram -->
        <div class="section-header"><span>Decision Flow Pipeline</span><span class="text-dim" id="dpCycleTime">Total Cycle: --ms</span></div>
        <div class="sankey-container" id="sankeyChart"></div>
        <div class="rg-formula" id="fSankey"></div>

        <!-- 2. Adversarial Debate Theater -->
        <div class="section-header"><span>Adversarial Debate Theater <span class="text-dim" style="font-size:0.6rem;margin-left:0.5rem" id="dtLiveStatus">Offline</span></span><span class="text-dim" id="dtTimestamp">--</span></div>
        <div id="dtContainer"></div>
        <div id="dtSummary"></div>
        <div id="dtArchive"></div>
        <div class="rg-formula" id="fDebate"></div>

        <div class="cb-grid">
            <!-- 3. Markov Regime Engine (left) -->
            <div class="cb-cell">
                <div class="section-header"><span>Markov Regime Engine</span><span class="text-dim" id="rgLastUpdate">--</span></div>
                <div class="rg-current" id="rgCurrent">
                    <div class="rg-state-badge" id="rgStateBadge">--</div>
                    <div class="rg-conf" id="rgConf">-- confidence</div>
                    <div style="flex:1"></div>
                    <div class="text-dim" style="font-size:0.6rem">5-State HMM</div>
                </div>
                <div class="rg-chord-svg" id="rgChord"></div>
                <div class="rg-formula" id="rgFormula"></div>
                <div class="rg-params" id="rgParams"></div>
                <div class="rg-timeline" id="rgTimeline"></div>
                <div class="rg-accuracy">
                    <div class="rg-acc-header">Prediction Accuracy (Last 20 Cycles)</div>
                    <div id="rgAccuracyChart"></div>
                </div>
                <div class="rg-heatmap">
                    <div class="rg-hm-header">Observed Transition Heatmap</div>
                    <div id="rgHeatmap"></div>
                </div>
            </div>

            <!-- 4. ML Signal Dashboard (right) -->
            <div class="cb-cell">
                <div class="section-header"><span>ML Signal Dashboard</span><span class="text-dim" id="mlSignalStatus">Offline</span></div>
                <div class="ml-grid" id="mlGrid"></div>
                <div class="section-header" style="border-top:1px solid var(--border)"><span>Confidence Thresholds</span></div>
                <div style="padding:0.75rem 1rem; font-size:0.65rem; line-height:2; color:var(--dim)">
                    <div>LP Strategies: <strong style="color:var(--fg)">≥ 84%</strong></div>
                    <div>Arbitrage: <strong style="color:var(--fg)">≥ 80%</strong></div>
                    <div>Perpetuals: <strong style="color:var(--fg)">≥ 50-60%</strong> (regime-dependent)</div>
                </div>
                <div class="section-header" style="border-top:1px solid var(--border)"><span>Agent Signal Horizon</span><span class="text-dim">Real-Time Stream</span></div>
                <div class="hz-chart" id="hzChart"></div>
            </div>

            <!-- 5. Agent Cognitive Load (left) -->
            <div class="cb-cell">
                <div class="section-header"><span>Agent Cognitive Load</span><span class="text-dim" id="agLoadStatus">Offline</span></div>
                <div class="ag-grid" id="agGrid"></div>
                <div class="rg-formula" id="fLoad"></div>
            </div>

            <!-- 6. Circuit Breakers (right) -->
            <div class="cb-cell">
                <div class="section-header"><span>Circuit Breakers</span><span id="cbStatus" class="text-green">ALL CLEAR</span></div>
                <div class="cb-breakers" id="cbBreakers"></div>
                <div class="cb-global" id="cbGlobal"></div>
                <div class="cb-drawdown">
                    <div style="font-size:0.5rem;font-weight:600;text-transform:uppercase;color:var(--dim);margin-bottom:0.5rem">Drawdown Monitor</div>
                    <div class="cb-dd-item">
                        <span class="cb-dd-label">Daily</span>
                        <div class="cb-dd-track"><div class="cb-dd-fill" id="cbDdDaily" style="width:24%;background:var(--green)"></div></div>
                        <span class="cb-dd-val" id="cbDdDailyVal">1.2% / 5%</span>
                    </div>
                    <div class="cb-dd-item">
                        <span class="cb-dd-label">Weekly</span>
                        <div class="cb-dd-track"><div class="cb-dd-fill" id="cbDdWeekly" style="width:34%;background:var(--green)"></div></div>
                        <span class="cb-dd-val" id="cbDdWeeklyVal">3.4% / 10%</span>
                    </div>
                </div>
                <div class="cb-alert-log" id="cbAlertLog">
                    <div class="cb-alert-row header">
                        <div class="cb-alert-cell">Time</div>
                        <div class="cb-alert-cell">Type</div>
                        <div class="cb-alert-cell">Severity</div>
                        <div class="cb-alert-cell">Message</div>
                        <div class="cb-alert-cell">Action</div>
                    </div>
                </div>
                <div class="rg-formula" id="fBreaker"></div>
            </div>

            <!-- 5b. Agent Memory Timeline (left) -->
            <div class="cb-cell">
                <div class="section-header"><span>Agent Memory Timeline</span><span class="text-dim">ElizaOS · Memory Management</span></div>
                <div class="mem-timeline" id="memTimeline"></div>
                <div class="mem-legend">
                    <div class="mem-legend-item"><div class="mem-legend-dot" style="background:var(--green)"></div>Store</div>
                    <div class="mem-legend-item"><div class="mem-legend-dot" style="background:#0066cc"></div>Recall</div>
                    <div class="mem-legend-item"><div class="mem-legend-dot" style="background:#cc8800"></div>Update</div>
                    <div class="mem-legend-item"><div class="mem-legend-dot" style="background:var(--red)"></div>Prune</div>
                </div>
                <div class="section-header" style="border-top:1px solid var(--border)"><span>Goal Tracking</span><span class="text-dim">ElizaOS</span></div>
                <div class="goal-list" id="goalList"></div>
            </div>

            <!-- 5c. Tool Orchestration (right) -->
            <div class="cb-cell">
                <div class="section-header"><span>Tool Orchestration</span><span class="text-dim">Solana Agent Kit · 5 Protocols</span></div>
                <div class="tool-flow" id="toolFlow"></div>
                <div class="section-header" style="border-top:1px solid var(--border)"><span>Protocol Action Log</span><span class="text-dim">Live</span></div>
                <div class="tool-log" id="toolLog"></div>
            </div>

            <!-- 2a. A-LAMS-VaR Risk Dashboard (left) -->
            <div class="cb-cell">
                <div class="section-header"><span>A-LAMS-VaR Risk Engine</span><span class="text-dim" id="varLastUpdate">Live · Risk Researcher</span></div>
                <div class="var-metrics" id="varMetrics"></div>
                <div class="section-header" style="border-top:1px solid var(--border)"><span>Asymmetry Parameter (δ)</span><span class="text-dim">Return-Sign Dependent</span></div>
                <div class="var-gauge-wrap" id="varAsymGauge"></div>
                <div class="section-header" style="border-top:1px solid var(--border)"><span>VaR Confidence Intervals</span><span class="text-dim">α = 95% / 99% / 99.5%</span></div>
                <div class="var-ci-grid" id="varCIGrid"></div>
                <div class="rg-formula" id="fVaR"></div>
            </div>

            <!-- 2b. Liquidity & Slippage (right) -->
            <div class="cb-cell">
                <div class="section-header"><span>Liquidity Scoring</span><span class="text-dim">AMM Pool Depth · Regime-Dependent</span></div>
                <div class="var-liq-grid" id="varLiqGrid"></div>
                <div class="section-header" style="border-top:1px solid var(--border)"><span>Slippage Impact by Regime</span><span class="text-dim">Non-Linear Scaling</span></div>
                <div class="var-slippage-chart" id="varSlippageChart"></div>
                <div class="section-header" style="border-top:1px solid var(--border)"><span>Regime Transition Matrix</span><span class="text-dim">5×5 Markov Chain · Asymmetric</span></div>
                <div class="var-matrix" id="varTransMatrix"></div>
            </div>

            <!-- 2c. Integration Pipeline (full-width) -->
            <div class="cb-full">
                <div class="section-header"><span>Cortex Integration Pipeline</span><span class="text-dim">A-LAMS-VaR → Position Limits → Circuit Breakers</span></div>
                <div class="var-pipeline" id="varPipeline"></div>
            </div>

        </div>

        <!-- 7. ML Signal Correlation Matrix (full width) -->
        <div class="section-header"><span>ML Signal Correlation Matrix</span><span class="text-dim">Brushable Scatterplot · 4 Signals × 50 Samples</span></div>
        <div class="scatter-matrix cb-pad" id="scatterMatrix"></div>
        <div class="rg-formula" id="fCorr"></div>

        <!-- 8. Inter-Agent Communication Network (full width) -->
        <div class="section-header"><span>Inter-Agent Communication Network</span><span class="text-dim">Ridgeline · 10 Agents × 24h Activity</span></div>
        <div class="ridgeline-chart cb-pad" id="ridgelineChart"></div>

        <!-- 9. Parameter Adaptation Ridgeline (full width) -->
        <div class="section-header"><span>Parameter Adaptation Ridgeline</span><span class="text-dim">Regime-Conditional Temporal Drift</span></div>
        <div class="pt-chart cb-pad" id="ptChart"></div>
        <div class="rg-formula" id="fDrift"></div>

        <!-- 10. Confidence Thresholds Scatter (full width) -->
        <div class="section-header"><span>Confidence Thresholds</span><span class="text-dim">Agent Signal Magnitude vs Threshold Sensitivity</span></div>
        <div class="ct-chart cb-pad" id="ctChart"></div>

        <!-- 11. Position Distribution — ECharts Scatter ↔ Bar Transition -->
        <div class="section-header"><span>Position Distribution</span><span class="text-dim">Long vs Short · Scatter ↔ Bar Transition</span></div>
        <div id="posDistChart" style="width:100%;height:480px;border-bottom:1px solid var(--border);"></div>

        <!-- 12. Agent Signal Matrix — Scatter Matrix + Parallel Coordinates -->
        <div class="section-header"><span>Agent Signal Matrix</span><span class="text-dim">Multi-Dimensional · Scatter Matrix + Parallel Coordinates</span></div>
        <div id="agentSignalMatrix" style="width:100%;height:720px;border-bottom:1px solid var(--border);"></div>

        <footer>
            <div>CORTEX COGNITIVE ARCHITECTURE</div>
            <div>SOLANA MAINNET</div>
            <div>&copy;2026 WIENER LABS</div>
        </footer>
    </div>

    <!-- Core Services -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/cerebral-api.js"></script>
    <script src="js/regime-service.js"></script>

    <!-- Cerebral Application Logic -->
    <script src="js/cerebral-app.js"></script>

    <!-- Shared Services -->
    <script src="js/ticker.js"></script>
    <script src="js/wallet.js"></script>
    <script src="js/toast.js"></script>
</body>
</html>
